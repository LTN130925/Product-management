extends ../../layouts/default.pug

block main
  if (role.permissions.includes('roles_permissions'))
    h1(class="mb-4") Phân quyền

    div(class="text-right")
      button(
        type="submit"
        class="btn btn-primary mb-3"
        button-submit
      ) Cập nhật

    if records.length > 0
      div(data-records=records)
      table(
        class="table table-hover table-sm"
        table-permission
      )
        thead
          tr
            th Tính năng
              each item in records
                th(class="text-center") #{item.title}

        tbody
          tr(
            class='d-none'
            data-name='id'
          )
            td
            each item in records
              td(class='text-center')
                input(type='text' value=item.id)
          tr
            td(colspan="4")
              b Danh mục sản phẩm

          tr(data-name="products-category_view")
            td Xem
            each item in records
              td(class="text-center")
                input(type="checkbox")

          tr(data-name="products-category_create")
            td Thêm mới
            each item in records
              td(class="text-center")
                input(type="checkbox")

          tr(data-name="products-category_edit")
            td Chỉnh sửa
            each item in records
              td(class="text-center")
                input(type="checkbox")

          tr(data-name="products-category_delete")
            td Xóa
            each item in records
              td(class="text-center")
                input(type="checkbox")

          tr
            td(colspan="4")
              b Sản phẩm

          tr(data-name="products_view")
            td Xem
            each item in records
              td(class="text-center")
                input(type="checkbox")

          tr(data-name="products_create")
            td Thêm mới
            each item in records
              td(class="text-center")
                input(type="checkbox")

          tr(data-name="products_edit")
            td Chỉnh sửa
            each item in records
              td(class="text-center")
                input(type="checkbox")

          tr(data-name="products_delete")
            td Xóa
            each item in records
              td(class="text-center")
                input(type="checkbox")

          tr
            td(colspan="4")
              b Nhóm quyền

          tr(data-name="roles_view")
            td Xem
            each item in records
              td(class="text-center")
                input(type="checkbox")

          tr(data-name="roles_create")
            td Thêm mới
            each item in records
              td(class="text-center")
                input(type="checkbox")

          tr(data-name="roles_edit")
            td Chỉnh sửa
            each item in records
              td(class="text-center")
                input(type="checkbox")

          tr(data-name="roles_delete")
            td Xóa
            each item in records
              td(class="text-center")
                input(type="checkbox")

          tr(data-name="roles_permissions")
            td Phân quyền
            each item in records
              td(class="text-center")
                input(type="checkbox")

          tr
            td(colspan="4")
              b Tài khoản

          tr(data-name="accounts_view")
            td Xem
            each item in records
              td(class="text-center")
                input(type="checkbox")

          tr(data-name="accounts_create")
            td Thêm mới
            each item in records
              td(class="text-center")
                input(type="checkbox")

          tr(data-name="accounts_edit")
            td Chỉnh sửa
            each item in records
              td(class="text-center")
                input(type="checkbox")

          tr(data-name="accounts_delete")
            td Xóa
            each item in records
              td(class="text-center")
                input(type="checkbox")

          tr
            td(colspan="4")
              b Bài viết

          tr(data-name="blogs_view")
            td Xem
            each item in records
              td(class="text-center")
                input(type="checkbox")

          tr(data-name="blogs_create")
            td Thêm mới
            each item in records
              td(class="text-center")
                input(type="checkbox")

          tr(data-name="blogs_edit")
            td Chỉnh sửa
            each item in records
              td(class="text-center")
                input(type="checkbox")

          tr(data-name="blogs_delete")
            td Xóa
            each item in records
              td(class="text-center")
                input(type="checkbox")

          tr
            td(colspan="4")
              b Danh mục bài viết

          tr(data-name="blogs-category_view")
            td Xem
            each item in records
              td(class="text-center")
                input(type="checkbox")
                
          tr(data-name="blogs-category_create")
            td Thêm mới
            each item in records
              td(class="text-center")
                input(type="checkbox")

          tr(data-name="blogs-category_edit")
            td Chỉnh sửa
            each item in records
              td(class="text-center")
                input(type="checkbox")

          tr(data-name="blogs-category_delete")
            td Xóa
            each item in records
              td(class="text-center")
                input(type="checkbox")

          tr
            td(colspan="4")
              b Đơn hàng

          tr(data-name="checkout_view")
            td Xem
            each item in records
              td(class="text-center")
                input(type="checkbox")

          tr(data-name="checkout_edit")
            td Chỉnh sửa
            each item in records
              td(class="text-center")
                input(type="checkbox")

          tr(data-name="checkout_delete")
            td Xóa
            each item in records
              td(class="text-center")
                input(type="checkbox")

          tr
            td(colspan="4")
              b Người dùng

          tr(data-name="users_view")
            td Xem
            each item in records
              td(class="text-center")
                input(type="checkbox")

          tr(data-name="users_edit")
            td Chỉnh sửa
            each item in records
              td(class="text-center")
                input(type="checkbox")

          tr(data-name="users_delete")
            td Xóa
            each item in records
              td(class="text-center")
                input(type="checkbox")

          tr
            td(colspan="4")
              b Cấu hình chung

          tr(data-name="settings-general_view")
            td Xem
            each item in records
              td(class="text-center")
                input(type="checkbox")

      form(
        action=`${prefixAdmin}/roles/permission?_method=PATCH`
        method='POST'
        form-control
      )
        input(
          id='permissions'
          name='permissions'
          class='d-none'
          value=''
        )
    else
      p --không tồn tại bạn cần thêm phân quyền--
      a(
        href=`${prefixAdmin}/roles`
        class='btn btn-outline-success'
      ) + Thêm mới

    script(src='/admin/js/permission.js')
  else 
    p Bạn không được cấp quyền truy cập vào phân quyền
